<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TODO List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">TODO List</a>

            <ul class="navbar-nav d-flex flex-row">
                <li class="nav-item m-2">
                    <a class="nav-link" aria-current="page" href="/">Home</a>
                </li>
                <li class="nav-item m-2">
                    <a class="nav-link" href="/Shopping">Shopping List</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container my-4" style="width: fit-content;">
        <h4 class="text-center my-2">Add an item to the list</h4>

        <form action="/" method="POST">
            <div class="mb-3">
                <label for="task" class="form-label">Task</label>
                <input type="text" class="form-control" name="task">
                <button type="submit" class="btn btn-primary mt-3" name="listName" value="<%= listTitle %>">Add to
                    List</button>
            </div>
        </form>

        <div class="my-5 list-group" id="todo-list">
            <h2>
                <%= listTitle %>
            </h2>
            <% if (locals.tasks) { %>

                <% for( let task of tasks ) { %>
                    <form action="/delete" method="post">
                        <label class="list-group-item" id="list-item"
                            onclick="this.style.textDecoration = 'line-through'">
                            <input class="form-check-input me-1" type="checkbox" name="checkbox" value="<%= task._id %>"
                                onchange="this.form.submit()">
                            <%= task.name %>
                        </label>
                        <input type="hidden" name="listName" value="<%= listTitle %>">
                    </form>
                    <% } %>

                        <% } %>
        </div>
    </div>
</body>

</html>